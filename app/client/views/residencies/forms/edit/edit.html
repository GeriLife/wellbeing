<template name="editResidencyModal">
  <div class="modal fade">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">
            {{_ "editResidencyModal-header" }}
          </h4>
        </div> <!-- / .modal-header -->
        {{# if Template.subscriptionsReady }}
        <div class="modal-body">
          <!-- check if residency exists - editing -->
          {{# if residency }}
            {{#autoForm id="editResidencyForm" type="update" collection="Residencies" doc=residency }}

              {{> afQuickField name="residentId" }}
              {{> afQuickField name="homeId" }}
              {{> afQuickField name="moveIn" buttonClasses="fa fa-calendar" }}
              {{> afQuickField name="moveOut" buttonClasses="fa fa-calendar" }}

              <button type="submit" class="btn btn-success">
                {{_ "editResidencyForm-save" }}
              </button>
              <button type="button" class="btn btn-danger" data-dismiss="modal">
                {{_ "editResidencyForm-cancel" }}
              </button>

            {{/ autoForm }}
          {{ else }}
            <!-- add new residency using resident and home IDs -->
            <!-- TODO: remove this option after migrating all data -->
            {{> addResidencyForm residentId=residentId homeId=homeId }}
          {{/ if }}
        </div> <!-- / .modal-body -->
        {{ else }}
          {{> spinner }}
        {{/ if }} <!-- /if Template.subscriptionsReady -->
      </div> <!-- / .modal-content -->
    </div> <!-- / .modal-dialogue -->
  </div> <!-- / .modal fade -->
</template>
