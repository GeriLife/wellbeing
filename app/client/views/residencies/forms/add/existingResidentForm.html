<template name="addResidencyForExistingResidentForm">
  {{#if residency.residentId}}
  <p>{{_ "residencies.previousEndTime"}} {{ residency.newMoveIn }}</p>
  {{/if}}
  <!-- Form -->
  {{#autoForm id="addResidencyForExistingResident" type="method" meteormethod="addNewResidencyWithExistingResident" collection="Residencies" doc=residency}}
  <label for="residentId">
    {{_ "residencies.residentId.label" }}
  </label>
  {{# if residency.residentId}}
  {{> afFieldInput name="residentId" value=residentId readonly="true" options=residentIdOptions }}
  {{else}}
  {{> afFieldInput name="residentId" value=residentId options=residentIdOptions }}
  {{/if}}
  <label for="homeId">
    {{_ "residencies.homeId.label" }}
  </label>
  {{> afFieldInput name="homeId" value=homeId options=homeSelectOptionsWithGroups }}

  <label for="moveIn">
    {{_ "residencies.moveIn.label" }}
  </label>
  {{> afFieldInput name="moveIn" class="dateField" buttonClasses="fa fa-calendar" value=today }}

  <label for="moveOut">
    {{_ "residencies.moveOut.label" }}
  </label>
  {{> afFieldInput name="moveOut" class="dateField" buttonClasses="fa fa-calendar" }}

  <br />

  <button type="submit" class="btn btn-success">
    {{_ "addResidencyForm-save" }}
  </button>

  {{#unless residency.residentId}}
  <button type="button" class="btn btn-danger" data-dismiss="modal">
    {{_ "addResidencyForm-cancel" }}
  </button>
  {{/unless}}

  {{#if residency.residentId}}
  <button class="btn btn-primary pull-right undo">
    {{_ "addResidencyForm-undo" }}
  </button>
  {{/if}}
  {{/ autoForm }}
</template>
